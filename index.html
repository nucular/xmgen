<html>
<head>
  <title>xmgen &middot; by nucular</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/codemirror.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="container">
    <div id="output" class="card">
      <span id="toggle">&lt;&nbsp;&gt;</span>
      <div class="card-content">
        <div id="render"></div>
        <pre id="html"></pre>
      </div>
    </div>
    <div class="card">
      <textarea id="code">
return div()(
  svg({width: 100, height: 100})(
    function(push) {
      for (var i = 0; i &lt; 100; i += 5) {
        push(line({
          x1: i - 5, y1: Math.sin((i - 5) / 10) * (100 / Math.PI) + 50,
          x2: i, y2: Math.sin(i / 10) * (100 / Math.PI) + 50,
          stroke: "black", "stroke-width": "2"
        }));
      }
    }
  ),

  p()(
    h1()("xmgen"),
    i()("A JavaScript XML generator in ~100 lines")
  ),

  "Check out the source on ",
  a({
    href: "https://github.com/nucular/xmgen"
  })("GitHub"), ".",

  h1()("Documentation"),
  "xmgen is split into multiple parts - the ",
  a({href: "https://github.com/nucular/xmgen/blob/master/src/xmgen.js"})("core"),
  " and extension modules (currently for ",
  a({href: "https://github.com/nucular/xmgen/blob/master/src/html.js"})("HTML"),
  " and ",
  a({href: "https://github.com/nucular/xmgen/blob/master/src/svg.js"})("SVG"),
  ") which provide shortcuts for common element types that (combined with ",
  code()("with"), ") make element structures shorter and more legible.",
  
  hr(),
  h2()("xmgen.js"),

  h3()("xmgen.Element(String|Function type, [Object attributes]) => Function"),
  pre({"data-lang": "javascript"})(
    "var link = xmgen.Element(\"a\", {\n",
    "  \"href\": \"https://asdf.com\"\n",
    "});\n"
  ),
  p()(
    "This pseudo-class contains the main implementation of xmgen. ",
    "The idea is that a call to ", code()("xmgen.Element"), " returns a ",
    "function-instance bastard which, when called, processes the arguments as ",
    "children for the instance and then returns itself to allow for method chaining."
  ),
  p()(
    "The ", code()("type"), " as well as the ", code()("attributes"), " can be ",
    "functions which will be resolved in the constructor (the instance is passed as ",
    code()("this"), "), to allow anonymous functions to be used in element structures."
  ),
  p()(
    b()("There are a few special cases to be aware of:"),
    ul()(
      li()(
        "Attributes with a value of ", code()("null"), " will be valueless ",
        "in the generated XML."
      ),
      li()(
        "To stop an empty element from collapsing (e.g. ",
        code()("&amp;lt;script&amp;gt;"), "s), append an empty text child to it:",
        br(), code()("script({src: \"...\"})(\"\")")
      ),
      li()(
        "If the element type is empty, no tags will be generated for it by ",
        code()("toString"), " (only the children will be concatenated and returned)."
      ),
      li()(
        "Types starting with a \"!\" are handled as doctypes. They don't ",
        "get closed and their children are put before the \">\" of the tag instead."
      ),
      li()(
        "Types starting with a \"?\" are handled as schema tags. They aren't ",
        "closed either and if collapsed, end with \"?>\" instead of \"/>\"."
      )
    )
  ),

  h3()("xmgen.Element(...)(Element|String|Array|Function child, ...) => Function"),
  pre({"data-lang": "javascript"})(
    "link(\n",
    "  \"Text child \",\n",
    "  xmgen.Element(\"b\")(\"Element child\"), \" \", \n",
    "  function() {\n",
    "    for (var i = 0; i &lt; 5; i++) {\n",
    "      this(xmgen.Element(\"i\")(i));\n",
    "    }\n",
    "  }\n",
    ");"
  ),
  p()(
    "The children passed as arguments can be other ", code()("Element"), "s, ",
    code()("String"), "s or ", code()("Array"), "s/", code()("Function"), "s ",
    "containing/returning objects of these types (or nothing at all)."
  ),
  p()(
    "If a ", code()("Function"), " is processed, it is called (the instance is ",
    "passed as ", code()("this"), ") and can append children itself by returning ",
    "something or calling ", code()("this(child, ...)"), " to recursively process ",
    "more things."
  ),

  h3()("xmgen.Element(...)([Number indention, [Number level]]) => String"),
  pre({"data-lang": "javascript"})("link.toString(2)"),
  pre({"data-lang": "xml"})(
    "&amp;lt;a href=\"https://asdf.com\"&amp;gt;Text child \n",
    "  &amp;lt;b&amp;gt;Element child&amp;lt;/b&amp;gt; \n",
    "  &amp;lt;i&amp;gt;0&amp;lt;/i&amp;gt;\n",
    "  &amp;lt;i&amp;gt;1&amp;lt;/i&amp;gt;\n",
    "  &amp;lt;i&amp;gt;2&amp;lt;/i&amp;gt;\n",
    "  &amp;lt;i&amp;gt;3&amp;lt;/i&amp;gt;\n",
    "  &amp;lt;i&amp;gt;4&amp;lt;/i&amp;gt;\n",
    "&amp;lt;/a&amp;gt;"
  ),
  p()(
    "This function generates valid XML from an ", code()("Element"), " by ",
    "recursively calling it on its children. Optional indention can be used ",
    "to make the output slightly more legible."
  ),

  hr(),
  h2()("html.js and svg.js"),
  pre({"data-lang": "javascript"})(
    "var doc;\n",
    "with (xmgen.html) {\n",
    "  doc = el()(\n",
    "    p()(\n",
    "      h1()(\"xmgen\"),\n",
    "      i()(\"A JavaScript XML generator in ~100 lines\")\n",
    "    ),\n",
    "    \"Check out the source on \",\n",
    "    a({\n",
    "      href: \"https://github.com/nucular/xmgen\"\n",
    "    })(\"GitHub\"), \".\"\n",
    "  );\n",
    "}"
  ),

  p()(
    "These extension modules (that should be loaded after xmgen.js) define ",
    "constructor functions for the basic elements used in the respective XML-based ",
    "markup language."
  ),
  p()(
    "Doctypes and schema tags are prefixed with a $ (", code()("$DOCTYPE, $svg"),
    ") and ", code()("xmgen.Element"), " is shortened to ", code()("el"), "."
  )
);
</textarea>
    </div>
    <span id="status"></span>
  </div>


  <script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/codemirror.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/addon/runmode/runmode.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/addon/runmode/colorize.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/mode/javascript/javascript.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.5.0/mode/xml/xml.min.js"></script>
  <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

  <script src="src/xmgen.js"></script>
  <script src="src/html.js"></script>
  <script src="src/svg.js"></script>
  <script src="script.js"></script>
</body>
</html>
